<!DOCTYPE html>
<html>

<head>
    <title>Simulasi Pergerakan Bus USU</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Koordinat awal (pusat peta di sekitar USU)
        const usuCoords = [3.566854, 98.659142];

        // Inisialisasi peta
        const map = L.map('map').setView(usuCoords, 15);

        // Tambahkan layer peta dari OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Tambahkan marker (pin) untuk bus
        const busIcon = L.icon({
            iconUrl: 'images/bus-icon.png', // Icon bus
            iconSize: [20, 20], // Ukuran icon
        });

        const busMarker = L.marker(usuCoords, { icon: busIcon }).addTo(map)
            .bindPopup('Bus Linus').openPopup();

        // Simulasikan pergerakan bus
        let step = 0;
        const route = [
            [3.566056, 98.653221],//stadion mini
            [3.565950, 98.653200],
            [3.565850, 98.653180],
            [3.565750, 98.653160],
            [3.565650, 98.653140],
            [3.565550, 98.653120],
            [3.565450, 98.653100],
            [3.565350, 98.653080],
            [3.565250, 98.653060],
            [3.565150, 98.653040],
            [3.565050, 98.653020],
            [3.564950, 98.653000],
            [3.564850, 98.652980],
            [3.564750, 98.652960],
            [3.564650, 98.652940],
            [3.564550, 98.652920],
            [3.564450, 98.652900],
            [3.564350, 98.652880],
            [3.564250, 98.652860],
            [3.564150, 98.652840],
            [3.564050, 98.652820],
            [3.563950, 98.652800],
            [3.563850, 98.652780],
            [3.563750, 98.652760],
            [3.563650, 98.652740],
            [3.563550, 98.652720],
            [3.563450, 98.652700],
            [3.563350, 98.652680],
            [3.563250, 98.652660],
            [3.563150, 98.652640],
            [3.563050, 98.652620],
            [3.562950, 98.652600],
            [3.562850, 98.652580],
            [3.562750, 98.652560],
            [3.562650, 98.652540],
            [3.562550, 98.652520],
            [3.562450, 98.652500],
            [3.562350, 98.652480],
            [3.562250, 98.652460],
            [3.562150, 98.652440],
            [3.562050, 98.652420],
            [3.561950, 98.652400],
            [3.561850, 98.652380],
            [3.561750, 98.652360],
            [3.561650, 98.652340],
            [3.561550, 98.652320],
            [3.561450, 98.652300],
            [3.561350, 98.652280],
            [3.561250, 98.652260],
            [3.561150, 98.652240],
            [3.561050, 98.652220],
            [3.560950, 98.652200],
            [3.560850, 98.652180],
            [3.560750, 98.652160],
            [3.560650, 98.652140],
            [3.560550, 98.652120],
            [3.560450, 98.652100],
            [3.560350, 98.652080],
            [3.560250, 98.652060],
            [3.560150, 98.652040],
            [3.560050, 98.652020],
            [3.559950, 98.652000],
            [3.559850, 98.651980],
            [3.559750, 98.651960],
            [3.559650, 98.651940],
            [3.559550, 98.651920],
            [3.559450, 98.651900],
            [3.559350, 98.651880],
            [3.559250, 98.651860],
            [3.559150, 98.651840],
            [3.559050, 98.651820],
            [3.558950, 98.651800],
            [3.558850, 98.651780],
            [3.558750, 98.651760],
            [3.558650, 98.651740],
            [3.558550, 98.651720],
            [3.558450, 98.651700],
            [3.558350, 98.651680],
            [3.558250, 98.651660],
            [3.558150, 98.651640],
            [3.558050, 98.651620],
            [3.557950, 98.651600],
            [3.557850, 98.651580],
            [3.557750, 98.651560],
            [3.557650, 98.651540],
            [3.557550, 98.651520],
            [3.557450, 98.651500],
            [3.557350, 98.651480],
            [3.557250, 98.651460],
            [3.557150, 98.651440],
            [3.557050, 98.651420],
            [3.556950, 98.651400],
            [3.556850, 98.651380],
            [3.556750, 98.651360],
            [3.556650, 98.651340],
            [3.556550, 98.651320],
            [3.556450, 98.651300],
            [3.556350, 98.651280],
            [3.556250, 98.651260],
            [3.556150, 98.651240],
            [3.556050, 98.651220],
            [3.555950, 98.651200],
            [3.555850, 98.651180],
            [3.555750, 98.651160],
            [3.555650, 98.651140],
            [3.555550, 98.651120],
            [3.555450, 98.651100],
            [3.555350, 98.651080],
            [3.555250, 98.651060],
            [3.555150, 98.651040],
            [3.555050, 98.651020],
            [3.554950, 98.651000],
            [3.554850, 98.650980],
            [3.554750, 98.650960],
            [3.554650, 98.650940],
            [3.554550, 98.650920],
            [3.554450, 98.650900],
            [3.554350, 98.650880],
            [3.554250, 98.650860],
            [3.554150, 98.650840],
            [3.554050, 98.650820],
            [3.553950, 98.650800],
            [3.553850, 98.650780],
            [3.553750, 98.650760],
            [3.553650, 98.650740],
            [3.553550, 98.650720],
            [3.553450, 98.650700],
            [3.553350, 98.650680],
        ];

        function moveBus() {
            if (step < route.length - 1) {
                step++;
            } else {
                step = 0; // Kembali ke titik awal
            }

            // Pindahkan marker ke koordinat baru
            const newCoords = route[step];
            busMarker.setLatLng(newCoords);

            // Geser peta untuk mengikuti bus
            map.panTo(newCoords);

            // Ulangi setiap 2 detik
            setTimeout(moveBus, 2000);
        }

        // Mulai simulasi pergerakan bus
        moveBus();
    </script>
</body>

</html>